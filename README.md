
# K-국방 AI 어시스턴트: 문서 기반 질의응답 챗봇

## 1. 프로젝트 개요

이 프로젝트는 군 입대를 희망하는 예비 장병들에게 정확하고 신뢰성 있는 정보를 제공하기 위해 개발된 **문서 기반 질의응답(Q&A) AI 챗봇**입니다.

공식적으로 배포된 모집요강, 규정, 안내문 등의 문서를 기반으로 답변을 생성하여, 사용자가 여러 웹사이트나 문서를 직접 탐색해야 하는 번거로움을 해결합니다. 본 프로젝트는 공군 IT병 면접을 위해 저의 기술 스택과 문제 해결 능력을 보여주고자 제작되었습니다.

[^13]

## 2. 주요 기능

### 문서 기반 질의응답 (RAG)
- 사용자가 PDF, DOCX, TXT 등 다양한 형식의 문서를 업로드하면, AI가 해당 문서의 내용을 학습합니다[^3].
- 사용자의 질문에 대해 학습된 문서의 정보를 바탕으로 답변을 생성하여, 잘못된 정보나 환각(Hallucination) 현상을 최소화합니다[^6].

### 다중 벡터 DB 관리
- 사용자는 주제별(예: 공군, 육군, 해군)로 여러 개의 벡터 데이터베이스(Vector DB)를 생성하고 관리할 수 있습니다[^3].
- 각 DB는 독립적으로 문서를 저장하며, 사용자는 대화하고 싶은 정보가 담긴 DB를 자유롭게 선택하고 전환할 수 있습니다[^1].

### 지능형 RAG 파이프라인 (feat. LangGraph)
- **질문 분석 및 재작성**: 사용자의 질문 의도를 명확히 파악하여 벡터 검색에 최적화된 형태로 질문을 재구성합니다[^2].
- **문서 검색 및 평가**: FAISS 벡터 스토어에서 질문과 관련된 문서를 검색한 후[^7], 검색된 문서가 질문과 실제로 관련이 있는지 평가하여 불필요한 정보를 필터링합니다[^5].
- **답변 생성 및 웹 검색**: 관련 문서가 있으면 해당 내용을 바탕으로 답변을 생성합니다. 만약 적절한 문서가 없으면, 웹 검색(Tavily API)을 통해 추가 정보를 찾아 답변을 생성합니다[^5][^9].
- **대화 흐름 유지**: 이전 대화 내용을 기억하여 사용자가 연속적인 질문을 하더라도 맥락에 맞는 답변을 제공합니다[^1][^8].

### 사용자 친화적 UI
- **문서 관리자 페이지**: 사용자가 직접 문서를 업로드/삭제하고, 벡터 DB를 생성/관리할 수 있는 웹 인터페이스를 제공합니다[^3][^11].
- **실시간 처리 과정 시각화**: `RAG 파이프라인`이 작동하는 동안 "문서 검색 중...", "답변 생성 중..."과 같이 현재 처리 단계를 실시간으로 사용자에게 보여주어 대기 시간의 지루함을 줄입니다[^1].
- **대화형 챗봇 인터페이스**: 사용자가 직관적으로 질문하고 답변을 받을 수 있는 채팅 UI를 제공합니다[^12].

## 3. 시스템 아키텍처

이 프로젝트는 **Flask**를 웹 프레임워크로 사용하며, **LangChain**과 **LangGraph**를 활용하여 RAG 파이프라인을 구축했습니다.

- **Frontend**: Flask의 `render_template`을 이용해 `index.html`과 `document_manager.html` 등 정적 파일을 렌더링합니다[^1][^3].
- **Backend**: Flask `app.py`를 중심으로 API 엔드포인트를 구성합니다. 사용자의 질문(`'/ask'`), DB 변경(`'/change_db'`), 문서 관리(`'/upload_documents'` 등) 요청을 처리합니다[^1][^3].
- **RAG Core (LangGraph)**: `streamlit_wrapper.py`와 `nodes.py`에서 정의된 LangGraph 워크플로우를 통해 RAG의 각 단계(검색, 평가, 답변 생성)를 유기적으로 연결하고 제어합니다[^9][^5].
- **Vector Store**: **FAISS**를 사용하여 텍스트 임베딩 벡터를 효율적으로 저장하고 검색합니다[^7].
- **LLM**: **OpenAI의 GPT-4o** 모델을 활용하여 질문 재구성, 문서 평가, 최종 답변 생성 등 핵심적인 자연어 처리 작업을 수행합니다[^2][^6].
- **Document Parser**: **LlamaParse**와 다양한 LangChain 로더를 사용하여 PDF, TXT, DOCX 등 여러 포맷의 문서를 파싱하고 텍스트로 변환합니다[^3][^4].

## 4. 프로젝트 구조

```

.
├── app.py                  \# Flask 메인 애플리케이션 및 API 라우팅
├── document_manager.py     \# 문서 업로드, 벡터 DB 생성/관리 로직
├── streamlit_wrapper.py    \# LangGraph 워크플로우 정의 및 컴파일
├── chains.py               \# RAG 각 단계에 사용될 LLM 체인 정의
├── nodes.py                \# LangGraph의 각 노드(기능 단위) 정의
├── rag.py                  \# RAG 답변 생성 체인 구성
├── retrievers.py           \# FAISS 벡터스토어용 Retriever 설정
├── states.py               \# LangGraph의 상태 관리 모델
├── LlamaParseLoader.py     \# LlamaParse 커스텀 로더
├── requirements.txt        \# 프로젝트 의존성 패키지 목록
├── prompts/                \# LLM에 사용될 프롬프트 파일
├── templates/              \# HTML 템플릿 파일
│   ├── index.html          \# 메인 챗봇 페이지
│   └── document_manager.html \# 문서 관리 페이지
└── static/                 \# CSS, JS 등 정적 파일

```

## 5. 실행 방법

1.  **의존성 설치**
    ```
    pip install -r requirements.txt
    ```

2.  **.env 파일 설정**
    - 프로젝트 루트 디렉토리에 `.env` 파일을 생성하고 OpenAI API 키를 입력합니다.
    ```
    OPENAI_API_KEY="sk-..."
    ```

3.  **애플리케이션 실행**
    ```
    python app.py
    ```

4.  **사용**
    - 웹 브라우저에서 `http://localhost:5000`에 접속하여 챗봇을 사용합니다.
    - `http://localhost:5000/document_manager`에 접속하여 문서를 업로드하고 벡터 DB를 관리할 수 있습니다.


    이 프로젝트는 군 모병 관련 질문에 답변하는 RAG(검색 증강 생성) 기반의 AI 어시스턴트입니다.

    **실행 화면**

    ![실행화면 1]<img src="https://github.com/hani0303/mma-qa-rag/blob/main/assets/2025-09-12_231459.png" width="500">
    ![실행화면 2]<img src="https://github.com/hani0303/mma-qa-rag/blob/main/assets/2025-09-12_231460.png" width="500">



## 6. 프로젝트의 기대효과 및 확장성

이 프로젝트는 단순히 정보를 제공하는 챗봇을 넘어, 최신 AI 기술을 활용하여 실제 문제를 해결하고 새로운 가치를 창출하는 것을 목표로 합니다.

- **정보 접근성 향상**: 여러 곳에 흩어져 있는 군 관련 정보를 한곳에 모아 제공함으로써, 정보 비대칭 문제를 해결하고 사용자의 시간과 노력을 절약할 수 있습니다. RAG 기술을 통해 신뢰할 수 있는 문서를 기반으로 답변하므로 정보의 정확성을 높입니다.
- **최신 기술 스택 활용**: Python, Flask, LangChain, LangGraph, FAISS 등 현재 AI 분야에서 활발하게 사용되는 기술들을 조합하여 복잡한 시스템을 설계하고 구현하는 기술적 역량을 보여줍니다. 이는 단순히 라이브러리를 사용하는 것을 넘어, 각 요소의 작동 원리를 이해하고 비즈니스 로직에 맞게 최적화하는 능력을 포함합니다.
- **높은 실용성 및 확장성**: 현재는 군 모병 안내에 초점을 맞추고 있지만, 이 시스템의 아키텍처는 다양한 분야로 확장될 잠재력을 가지고 있습니다. 예를 들어, 방대한 양의 **내부 규정, 기술 매뉴얼, 작전 절차** 등을 학습시켜 내부 구성원의 업무 효율을 높이는 지식 관리 시스템으로 활용할 수 있습니다.
- **주도적인 문제 해결 능력**: 프로젝트를 진행하며 마주치는 기술적 난관들을 해결하기 위해 공식 문서와 커뮤니티를 적극적으로 탐색하는 과정은, 새로운 기술을 습득하고 스스로 성장하는 주도적인 학습 자세를 보여주는 결과물입니다.
```

